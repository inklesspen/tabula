import contextlib
import datetime

import pytest
import trio
from tabula.device.eventsource import Event
from tabula.device.hwtypes import MultitouchVariant, TouchEvent, TouchReport
from tabula.device.kobo_touchscreen import Touchscreen


class SimpleEventSource(contextlib.AbstractContextManager):
    def __init__(self, events: list[Event]):
        self._events = events

    def events(self):
        while self._events:
            evt = self._events.pop(0)
            yield evt

    def __exit__(self, _exc_type, _exc_value, _traceback):
        return None


TAP_RAW_EVENTS = [
    Event.from_log("EV_KEY", "BTN_TOOL_FINGER", value=1, seconds=3110, microseconds=243391),
    Event.from_log("EV_KEY", "BTN_TOUCH", value=1, seconds=3110, microseconds=243391),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3110, microseconds=243391),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3110, microseconds=243391),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=601, seconds=3110, microseconds=243391),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=618, seconds=3110, microseconds=243391),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=38, seconds=3110, microseconds=243391),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3110, microseconds=243391),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3110, microseconds=243391),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3110, microseconds=243391),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3110, microseconds=243391),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3110, microseconds=243391),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3110, microseconds=254292),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3110, microseconds=254292),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=601, seconds=3110, microseconds=254292),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=618, seconds=3110, microseconds=254292),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=38, seconds=3110, microseconds=254292),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3110, microseconds=254292),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3110, microseconds=254292),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3110, microseconds=254292),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3110, microseconds=254292),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3110, microseconds=254292),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3110, microseconds=264990),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3110, microseconds=264990),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=601, seconds=3110, microseconds=264990),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=618, seconds=3110, microseconds=264990),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=38, seconds=3110, microseconds=264990),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3110, microseconds=264990),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3110, microseconds=264990),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3110, microseconds=264990),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3110, microseconds=264990),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3110, microseconds=264990),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3110, microseconds=281031),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3110, microseconds=281031),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=601, seconds=3110, microseconds=281031),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=618, seconds=3110, microseconds=281031),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=38, seconds=3110, microseconds=281031),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3110, microseconds=281031),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3110, microseconds=281031),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3110, microseconds=281031),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3110, microseconds=281031),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3110, microseconds=281031),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3110, microseconds=296867),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3110, microseconds=296867),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=601, seconds=3110, microseconds=296867),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=618, seconds=3110, microseconds=296867),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=38, seconds=3110, microseconds=296867),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3110, microseconds=296867),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3110, microseconds=296867),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3110, microseconds=296867),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3110, microseconds=296867),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3110, microseconds=296867),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3110, microseconds=312807),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3110, microseconds=312807),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=601, seconds=3110, microseconds=312807),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=617, seconds=3110, microseconds=312807),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=38, seconds=3110, microseconds=312807),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3110, microseconds=312807),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3110, microseconds=312807),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3110, microseconds=312807),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3110, microseconds=312807),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3110, microseconds=312807),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3110, microseconds=328752),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3110, microseconds=328752),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=601, seconds=3110, microseconds=328752),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=615, seconds=3110, microseconds=328752),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=35, seconds=3110, microseconds=328752),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3110, microseconds=328752),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3110, microseconds=328752),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3110, microseconds=328752),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3110, microseconds=328752),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3110, microseconds=328752),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3110, microseconds=344374),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3110, microseconds=344374),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=600, seconds=3110, microseconds=344374),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=613, seconds=3110, microseconds=344374),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3110, microseconds=344374),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3110, microseconds=344374),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3110, microseconds=344374),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3110, microseconds=344374),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3110, microseconds=344374),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3110, microseconds=344374),
    Event.from_log("EV_KEY", "BTN_TOUCH", value=0, seconds=3110, microseconds=375037),
    Event.from_log("EV_KEY", "BTN_TOOL_FINGER", value=0, seconds=3110, microseconds=375037),
]

TAP_TOUCH_EVENTS = [
    TouchReport(touches=[TouchEvent(x=601, y=618, pressure=38, slot=0)], timestamp=datetime.timedelta(seconds=3110, microseconds=243391)),
    TouchReport(touches=[TouchEvent(x=601, y=618, pressure=38, slot=0)], timestamp=datetime.timedelta(seconds=3110, microseconds=254292)),
    TouchReport(touches=[TouchEvent(x=601, y=618, pressure=38, slot=0)], timestamp=datetime.timedelta(seconds=3110, microseconds=264990)),
    TouchReport(touches=[TouchEvent(x=601, y=618, pressure=38, slot=0)], timestamp=datetime.timedelta(seconds=3110, microseconds=281031)),
    TouchReport(touches=[TouchEvent(x=601, y=618, pressure=38, slot=0)], timestamp=datetime.timedelta(seconds=3110, microseconds=296867)),
    TouchReport(touches=[TouchEvent(x=601, y=617, pressure=38, slot=0)], timestamp=datetime.timedelta(seconds=3110, microseconds=312807)),
    TouchReport(touches=[TouchEvent(x=601, y=615, pressure=35, slot=0)], timestamp=datetime.timedelta(seconds=3110, microseconds=328752)),
    TouchReport(touches=[TouchEvent(x=600, y=613, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3110, microseconds=344374)),
]

SWIPE_RAW_EVENTS = [
    Event.from_log("EV_KEY", "BTN_TOOL_FINGER", value=1, seconds=3131, microseconds=710562),
    Event.from_log("EV_KEY", "BTN_TOUCH", value=1, seconds=3131, microseconds=710562),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=710562),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=710562),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1270, seconds=3131, microseconds=710562),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=455, seconds=3131, microseconds=710562),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=18, seconds=3131, microseconds=710562),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=710562),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=710562),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=710562),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=710562),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=710562),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=721438),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=721438),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1270, seconds=3131, microseconds=721438),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=455, seconds=3131, microseconds=721438),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=20, seconds=3131, microseconds=721438),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=721438),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=721438),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=721438),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=721438),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=721438),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=732171),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=732171),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1268, seconds=3131, microseconds=732171),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=456, seconds=3131, microseconds=732171),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=22, seconds=3131, microseconds=732171),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=732171),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=732171),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=732171),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=732171),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=732171),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=748064),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=748064),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1265, seconds=3131, microseconds=748064),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=458, seconds=3131, microseconds=748064),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=24, seconds=3131, microseconds=748064),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=748064),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=748064),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=748064),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=748064),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=748064),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=763993),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=763993),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1260, seconds=3131, microseconds=763993),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=461, seconds=3131, microseconds=763993),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=26, seconds=3131, microseconds=763993),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=763993),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=763993),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=763993),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=763993),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=763993),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=779945),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=779945),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1252, seconds=3131, microseconds=779945),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=464, seconds=3131, microseconds=779945),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=27, seconds=3131, microseconds=779945),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=779945),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=779945),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=779945),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=779945),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=779945),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=795945),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=795945),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1241, seconds=3131, microseconds=795945),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=467, seconds=3131, microseconds=795945),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=29, seconds=3131, microseconds=795945),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=795945),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=795945),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=795945),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=795945),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=795945),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=811856),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=811856),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1227, seconds=3131, microseconds=811856),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=470, seconds=3131, microseconds=811856),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=31, seconds=3131, microseconds=811856),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=811856),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=811856),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=811856),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=811856),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=811856),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=827802),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=827802),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1205, seconds=3131, microseconds=827802),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=471, seconds=3131, microseconds=827802),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=32, seconds=3131, microseconds=827802),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=827802),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=827802),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=827802),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=827802),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=827802),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=843737),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=843737),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1179, seconds=3131, microseconds=843737),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=473, seconds=3131, microseconds=843737),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3131, microseconds=843737),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=843737),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=843737),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=843737),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=843737),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=843737),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=859612),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=859612),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1112, seconds=3131, microseconds=859612),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=478, seconds=3131, microseconds=859612),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3131, microseconds=859612),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=859612),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=859612),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=859612),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=859612),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=859612),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=875553),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=875553),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1020, seconds=3131, microseconds=875553),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=480, seconds=3131, microseconds=875553),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3131, microseconds=875553),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=875553),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=875553),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=875553),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=875553),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=875553),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=891603),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=891603),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=918, seconds=3131, microseconds=891603),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=483, seconds=3131, microseconds=891603),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3131, microseconds=891603),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=891603),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=891603),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=891603),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=891603),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=891603),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=907481),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=907481),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=817, seconds=3131, microseconds=907481),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=486, seconds=3131, microseconds=907481),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3131, microseconds=907481),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=907481),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=907481),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=907481),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=907481),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=907481),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=923434),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=923434),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=746, seconds=3131, microseconds=923434),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=486, seconds=3131, microseconds=923434),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3131, microseconds=923434),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=923434),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=923434),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=923434),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=923434),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=923434),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=939354),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=939354),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=675, seconds=3131, microseconds=939354),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=485, seconds=3131, microseconds=939354),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3131, microseconds=939354),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=939354),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=939354),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=939354),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=939354),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=939354),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=955297),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=955297),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=607, seconds=3131, microseconds=955297),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=481, seconds=3131, microseconds=955297),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3131, microseconds=955297),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=955297),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=955297),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=955297),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=955297),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=955297),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=971325),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=971325),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=547, seconds=3131, microseconds=971325),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=472, seconds=3131, microseconds=971325),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3131, microseconds=971325),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=971325),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=971325),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=971325),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=971325),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=971325),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3131, microseconds=987144),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3131, microseconds=987144),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=499, seconds=3131, microseconds=987144),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=464, seconds=3131, microseconds=987144),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3131, microseconds=987144),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3131, microseconds=987144),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3131, microseconds=987144),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3131, microseconds=987144),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3131, microseconds=987144),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3131, microseconds=987144),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3132, microseconds=3142),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3132, microseconds=3142),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=460, seconds=3132, microseconds=3142),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=458, seconds=3132, microseconds=3142),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3132, microseconds=3142),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3132, microseconds=3142),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3132, microseconds=3142),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3132, microseconds=3142),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3132, microseconds=3142),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3132, microseconds=3142),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3132, microseconds=18711),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3132, microseconds=18711),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=439, seconds=3132, microseconds=18711),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=455, seconds=3132, microseconds=18711),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3132, microseconds=18711),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3132, microseconds=18711),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3132, microseconds=18711),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3132, microseconds=18711),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3132, microseconds=18711),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3132, microseconds=18711),
    Event.from_log("EV_KEY", "BTN_TOUCH", value=0, seconds=3132, microseconds=49361),
    Event.from_log("EV_KEY", "BTN_TOOL_FINGER", value=0, seconds=3132, microseconds=49361),
]

SWIPE_TOUCH_EVENTS = [
    TouchReport(touches=[TouchEvent(x=1270, y=455, pressure=18, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=710562)),
    TouchReport(touches=[TouchEvent(x=1270, y=455, pressure=20, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=721438)),
    TouchReport(touches=[TouchEvent(x=1268, y=456, pressure=22, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=732171)),
    TouchReport(touches=[TouchEvent(x=1265, y=458, pressure=24, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=748064)),
    TouchReport(touches=[TouchEvent(x=1260, y=461, pressure=26, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=763993)),
    TouchReport(touches=[TouchEvent(x=1252, y=464, pressure=27, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=779945)),
    TouchReport(touches=[TouchEvent(x=1241, y=467, pressure=29, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=795945)),
    TouchReport(touches=[TouchEvent(x=1227, y=470, pressure=31, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=811856)),
    TouchReport(touches=[TouchEvent(x=1205, y=471, pressure=32, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=827802)),
    TouchReport(touches=[TouchEvent(x=1179, y=473, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=843737)),
    TouchReport(touches=[TouchEvent(x=1112, y=478, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=859612)),
    TouchReport(touches=[TouchEvent(x=1020, y=480, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=875553)),
    TouchReport(touches=[TouchEvent(x=918, y=483, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=891603)),
    TouchReport(touches=[TouchEvent(x=817, y=486, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=907481)),
    TouchReport(touches=[TouchEvent(x=746, y=486, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=923434)),
    TouchReport(touches=[TouchEvent(x=675, y=485, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=939354)),
    TouchReport(touches=[TouchEvent(x=607, y=481, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=955297)),
    TouchReport(touches=[TouchEvent(x=547, y=472, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=971325)),
    TouchReport(touches=[TouchEvent(x=499, y=464, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3131, microseconds=987144)),
    TouchReport(touches=[TouchEvent(x=460, y=458, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3132, microseconds=3142)),
    TouchReport(touches=[TouchEvent(x=439, y=455, pressure=34, slot=0)], timestamp=datetime.timedelta(seconds=3132, microseconds=18711)),
]


PINCH_RAW_EVENTS = [
    Event.from_log("EV_KEY", "BTN_TOOL_FINGER", value=1, seconds=3383, microseconds=532388),
    Event.from_log("EV_KEY", "BTN_TOUCH", value=1, seconds=3383, microseconds=532388),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3383, microseconds=532388),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=532388),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=294, seconds=3383, microseconds=532388),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=797, seconds=3383, microseconds=532388),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=32, seconds=3383, microseconds=532388),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=532388),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=532388),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=532388),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=532388),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=532388),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3383, microseconds=543657),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=543657),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=294, seconds=3383, microseconds=543657),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=797, seconds=3383, microseconds=543657),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=32, seconds=3383, microseconds=543657),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=543657),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=543657),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=543657),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=543657),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=543657),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=294, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=797, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=33, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=1, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1179, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=153, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=42, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=555581),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=298, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=797, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=33, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=1, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1175, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=155, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=42, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=571516),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=309, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=795, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=1, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1165, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=165, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=43, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=587521),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=327, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=787, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=1, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1150, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=176, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=43, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=603368),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=351, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=774, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=34, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=1, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1131, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=191, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=44, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=619331),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=385, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=755, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=33, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=1, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1108, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=210, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=44, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=635149),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=425, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=731, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=32, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=1, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1082, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=232, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=43, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=651116),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=460, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=706, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=28, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=1, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1049, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=261, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=41, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=666988),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=482, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=691, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=26, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=1, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=1017, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=291, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=38, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=682790),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=1, seconds=3383, microseconds=698468),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=698468),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=990, seconds=3383, microseconds=698468),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=314, seconds=3383, microseconds=698468),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=28, seconds=3383, microseconds=698468),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=698468),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=698468),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=698468),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=698468),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=698468),
    Event.from_log("EV_ABS", "ABS_MT_TRACKING_ID", value=1, seconds=3383, microseconds=712934),
    Event.from_log("EV_ABS", "ABS_MT_DISTANCE", value=0, seconds=3383, microseconds=712934),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_X", value=970, seconds=3383, microseconds=712934),
    Event.from_log("EV_ABS", "ABS_MT_POSITION_Y", value=331, seconds=3383, microseconds=712934),
    Event.from_log("EV_ABS", "ABS_MT_PRESSURE", value=23, seconds=3383, microseconds=712934),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MAJOR", value=0, seconds=3383, microseconds=712934),
    Event.from_log("EV_ABS", "ABS_MT_TOUCH_MINOR", value=0, seconds=3383, microseconds=712934),
    Event.from_log("EV_ABS", "ABS_MT_ORIENTATION", value=0, seconds=3383, microseconds=712934),
    Event.from_log("EV_SYN", "SYN_MT_REPORT", value=0, seconds=3383, microseconds=712934),
    Event.from_log("EV_SYN", "SYN_REPORT", value=0, seconds=3383, microseconds=712934),
    Event.from_log("EV_KEY", "BTN_TOUCH", value=0, seconds=3383, microseconds=743562),
    Event.from_log("EV_KEY", "BTN_TOOL_FINGER", value=0, seconds=3383, microseconds=743562),
]
PINCH_TOUCH_EVENTS = [
    TouchReport(touches=[TouchEvent(x=294, y=797, pressure=32, slot=0)], timestamp=datetime.timedelta(seconds=3383, microseconds=532388)),
    TouchReport(touches=[TouchEvent(x=294, y=797, pressure=32, slot=0)], timestamp=datetime.timedelta(seconds=3383, microseconds=543657)),
    TouchReport(
        touches=[TouchEvent(x=294, y=797, pressure=33, slot=0), TouchEvent(x=1179, y=153, pressure=42, slot=1)],
        timestamp=datetime.timedelta(seconds=3383, microseconds=555581),
    ),
    TouchReport(
        touches=[TouchEvent(x=298, y=797, pressure=33, slot=0), TouchEvent(x=1175, y=155, pressure=42, slot=1)],
        timestamp=datetime.timedelta(seconds=3383, microseconds=571516),
    ),
    TouchReport(
        touches=[TouchEvent(x=309, y=795, pressure=34, slot=0), TouchEvent(x=1165, y=165, pressure=43, slot=1)],
        timestamp=datetime.timedelta(seconds=3383, microseconds=587521),
    ),
    TouchReport(
        touches=[TouchEvent(x=327, y=787, pressure=34, slot=0), TouchEvent(x=1150, y=176, pressure=43, slot=1)],
        timestamp=datetime.timedelta(seconds=3383, microseconds=603368),
    ),
    TouchReport(
        touches=[TouchEvent(x=351, y=774, pressure=34, slot=0), TouchEvent(x=1131, y=191, pressure=44, slot=1)],
        timestamp=datetime.timedelta(seconds=3383, microseconds=619331),
    ),
    TouchReport(
        touches=[TouchEvent(x=385, y=755, pressure=33, slot=0), TouchEvent(x=1108, y=210, pressure=44, slot=1)],
        timestamp=datetime.timedelta(seconds=3383, microseconds=635149),
    ),
    TouchReport(
        touches=[TouchEvent(x=425, y=731, pressure=32, slot=0), TouchEvent(x=1082, y=232, pressure=43, slot=1)],
        timestamp=datetime.timedelta(seconds=3383, microseconds=651116),
    ),
    TouchReport(
        touches=[TouchEvent(x=460, y=706, pressure=28, slot=0), TouchEvent(x=1049, y=261, pressure=41, slot=1)],
        timestamp=datetime.timedelta(seconds=3383, microseconds=666988),
    ),
    TouchReport(
        touches=[TouchEvent(x=482, y=691, pressure=26, slot=0), TouchEvent(x=1017, y=291, pressure=38, slot=1)],
        timestamp=datetime.timedelta(seconds=3383, microseconds=682790),
    ),
    TouchReport(touches=[TouchEvent(x=990, y=314, pressure=28, slot=1)], timestamp=datetime.timedelta(seconds=3383, microseconds=698468)),
    TouchReport(touches=[TouchEvent(x=970, y=331, pressure=23, slot=1)], timestamp=datetime.timedelta(seconds=3383, microseconds=712934)),
]


@pytest.mark.parametrize(
    "raw_events,expected",
    [
        pytest.param(TAP_RAW_EVENTS, TAP_TOUCH_EVENTS, id="simple_tap"),
        pytest.param(SWIPE_RAW_EVENTS, SWIPE_TOUCH_EVENTS, id="swipe"),
        pytest.param(PINCH_RAW_EVENTS, PINCH_TOUCH_EVENTS, id="pinch"),
    ],
)
async def test_touches(raw_events, expected, nursery):
    end_event = Event.from_log(
        "EV_SYN", "SYN_CONFIG", value=42, seconds=raw_events[-1].timestamp.seconds, microseconds=raw_events[-1].timestamp.microseconds
    )
    touch_send, touch_receive = trio.open_memory_channel[TouchReport](0)
    touchscreen = Touchscreen(MultitouchVariant.SNOW_PROTOCOL, touch_send, SimpleEventSource(raw_events + [end_event]))
    await nursery.start(touchscreen.run)
    received = []
    async with touch_receive:
        async for event in touch_receive:
            received.append(event)
    assert received == expected
